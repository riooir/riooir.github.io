{"version":3,"sources":["webpack://WasmAR/webpack/universalModuleDefinition","webpack://WasmAR/webpack/bootstrap","webpack://WasmAR/./js/grayscale.js","webpack://WasmAR/./js/image-tracker.js","webpack://WasmAR/./js/shaders/flip-image.glsl","webpack://WasmAR/./js/shaders/grayscale.glsl","webpack://WasmAR/./js/wasm-ar-lib.js","webpack://WasmAR/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://WasmAR/./node_modules/@babel/runtime/helpers/createClass.js"],"names":["isMobile","mobile","a","test","substr","navigator","userAgent","vendor","window","opera","GrayScaleMedia","source","width","height","canvas","_source","_width","_height","_canvas","document","createElement","_flipImageProg","require","_grayscaleProg","glReady","initGL","vertShaderSource","fragShaderSource","gl","getContext","viewport","drawingBufferWidth","drawingBufferHeight","clearColor","clear","COLOR_BUFFER_BIT","vertShader","createShader","VERTEX_SHADER","fragShader","FRAGMENT_SHADER","shaderSource","compileShader","program","createProgram","attachShader","linkProgram","useProgram","vertices","Float32Array","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","positionLocation","getAttribLocation","vertexAttribPointer","FLOAT","enableVertexAttribArray","flipLocation","getUniformLocation","texture","createTexture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","pixelBuf","Uint8Array","grayBuf","undefined","uniform1f","texImage2D","RGBA","UNSIGNED_BYTE","drawArrays","TRIANGLES","readPixels","j","i","length","Promise","resolve","reject","mediaDevices","getUserMedia","aspect","audio","video","ideal","aspectRatio","facingMode","then","stream","srcObject","onloadedmetadata","e","play","err","N","ImageTracker","callback","_this","valid","ARWasm","Module","console","log","onWasmInit","_Module","_init","cwrap","_resetTracking","_track","imPtr","_malloc","refIm","refImWidth","refImHeight","refImPtr","HEAPU8","set","ptr","getValue","dataPtr","data","Float64Array","HEAPF64","h","slice","warped","H","corners","im","res","resObj","parseResult","resetTracking"],"mappings":"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","file":"wasm-ar.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WasmAR\"] = factory();\n\telse\n\t\troot[\"WasmAR\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/wasm-ar-lib.js\");\n","function isMobile() {\n    let mobile = false;\n    (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))) mobile = true;})(navigator.userAgent||navigator.vendor||window.opera);\n    return mobile;\n};\n\nexport class GrayScaleMedia\n{\n    constructor(source, width, height, canvas) {\n        this._source = source;\n        this._width = width;\n        this._height = height;\n        this._canvas = canvas ? canvas : document.createElement(\"canvas\");\n        this._canvas.width = width;\n        this._canvas.height = height;\n\n        this._flipImageProg = require(\"./shaders/flip-image.glsl\");\n        this._grayscaleProg = require(\"./shaders/grayscale.glsl\");\n        this.glReady = false;\n        this.initGL(this._flipImageProg, this._grayscaleProg);\n    }\n\n    initGL(vertShaderSource, fragShaderSource) {\n        this.gl = this._canvas.getContext(\"webgl\");\n\n        this.gl.viewport(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight);\n        this.gl.clearColor(0.1, 0.1, 0.1, 1.0);\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n\n        const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\n        const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\n\n        this.gl.shaderSource(vertShader, vertShaderSource);\n        this.gl.shaderSource(fragShader, fragShaderSource);\n\n        this.gl.compileShader(vertShader);\n        this.gl.compileShader(fragShader);\n\n        const program = this.gl.createProgram();\n        this.gl.attachShader(program, vertShader);\n        this.gl.attachShader(program, fragShader);\n\n        this.gl.linkProgram(program);\n\n        this.gl.useProgram(program);\n\n        const vertices = new Float32Array([\n            -1, -1,\n            -1,  1,\n             1,  1,\n            -1, -1,\n             1,  1,\n             1, -1,\n        ]);\n\n        const buffer = this.gl.createBuffer();\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, buffer);\n        this.gl.bufferData(this.gl.ARRAY_BUFFER, vertices, this.gl.STATIC_DRAW);\n\n        const positionLocation = this.gl.getAttribLocation(program, \"position\");\n        this.gl.vertexAttribPointer(positionLocation, 2, this.gl.FLOAT, false, 0, 0);\n        this.gl.enableVertexAttribArray(positionLocation);\n\n        this.flipLocation = this.gl.getUniformLocation(program, \"flipY\");\n\n        const texture = this.gl.createTexture();\n        this.gl.activeTexture(this.gl.TEXTURE0);\n        this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n\n        // if either dimension of image is not a power of 2\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);\n\n        this.glReady = true;\n        this.pixelBuf = new Uint8Array(this.gl.drawingBufferWidth * this.gl.drawingBufferHeight * 4);\n        this.grayBuf = new Uint8Array(this.gl.drawingBufferWidth * this.gl.drawingBufferHeight);\n    }\n\n    getFrame() {\n        if (!this.glReady) return undefined;\n\n        this.gl.uniform1f(this.flipLocation, -1); // flip image\n        this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, this._source);\n        this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\n\n        this.gl.readPixels(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight, this.gl.RGBA, this.gl.UNSIGNED_BYTE, this.pixelBuf);\n\n        let j = 0;\n        for (let i = 0; i < this.pixelBuf.length; i += 4) {\n            this.grayBuf[j] = this.pixelBuf[i];\n            j++;\n        }\n        return this.grayBuf;\n    }\n\n    requestStream() {\n        return new Promise((resolve, reject) => {\n            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia)\n                return reject();\n\n            // Hack for mobile browsers: aspect ratio is flipped.\n            var aspect = this._width / this._height;\n            if (isMobile()) {\n                aspect = 1 / aspect;\n            }\n\n            navigator.mediaDevices.getUserMedia({\n                audio: false,\n                video: {\n                    width: { ideal: this._width },\n                    height: { ideal: this._height },\n                    aspectRatio: { ideal: aspect },\n                    facingMode: \"environment\"\n                }\n            })\n            .then(stream => {\n                this._source.srcObject = stream;\n                this._source.onloadedmetadata = e => {\n                    this._source.play();\n                    resolve(this._source);\n                };\n            })\n            .catch(err => {\n                reject(err);\n            });\n        });\n    }\n}\n","const N = 10;\n\nexport class ImageTracker {\n    constructor(width, height, callback) {\n        let _this = this;\n\n        this._width = width;\n        this._height = height;\n\n        this.valid = false;\n\n        ARWasm().then(function (Module) {\n            console.log(\"WASM module loaded.\");\n            _this.onWasmInit(Module);\n            if (callback) callback();\n        });\n    }\n\n    onWasmInit(Module) {\n        this._Module = Module;\n\n        this._init = this._Module.cwrap(\"_Z6initARPhmm\", \"number\", [\"number\", \"number\", \"number\"]);\n        this._resetTracking = this._Module.cwrap(\"_Z13resetTrackingPhmm\", \"number\", [\"number\", \"number\", \"number\"]);\n        this._track = this._Module.cwrap(\"_Z5trackPhmm\", \"number\", [\"number\", \"number\", \"number\"]);\n\n        this.imPtr = this._Module._malloc(this._width * this._height);\n    }\n\n    addRefIm(refIm, refImWidth, refImHeight) {\n        return new Promise((resolve, reject) => {\n            this.refImPtr = this._Module._malloc(refIm.length);\n            this._Module.HEAPU8.set(refIm, this.refImPtr);\n            this._init(this.refImPtr, refImWidth, refImHeight);\n            resolve();\n        });\n    }\n\n    parseResult(ptr) {\n        const valid = this._Module.getValue(ptr, \"i8\");\n        const dataPtr = this._Module.getValue(ptr + 4, \"*\");\n        let data = new Float64Array(this._Module.HEAPF64.buffer, dataPtr, 17);\n\n        const h = data.slice(0, 9);\n        const warped = data.slice(9, 17);\n\n        return {\n            valid: valid,\n            H: h,\n            corners: warped\n        };\n    }\n\n    resetTracking(im) {\n        this._Module.HEAPU8.set(im, this.imPtr);\n        const res = this._resetTracking(this.imPtr, this._width, this._height);\n\n        const resObj = this.parseResult(res);\n        this.valid = resObj.valid;\n        return resObj;\n    }\n\n    track(im) {\n        // reset tracking if homography is no long valid\n        if (!this.valid) {\n            return this.resetTracking(im, this._width, this._height);\n        }\n        this._Module.HEAPU8.set(im, this.imPtr);\n        const res = this._track(this.imPtr, this._width, this._height);\n\n        const resObj = this.parseResult(res);\n        this.valid = resObj.valid;\n        return resObj;\n    }\n}\n","module.exports = \"attribute vec2 position;\\nvarying vec2 tex_coords;\\nuniform float flipY;\\nvoid main(void) {\\ntex_coords = (position + 1.0) / 2.0;\\ntex_coords.y = 1.0 - tex_coords.y;\\ngl_Position = vec4(position * vec2(1, flipY), 0.0, 1.0);\\n}\"","module.exports = \"precision highp float;\\nuniform sampler2D u_image;\\nvarying vec2 tex_coords;\\nconst vec3 g = vec3(0.299, 0.587, 0.114);\\nvoid main(void) {\\nvec4 color = texture2D(u_image, tex_coords);\\nfloat gray = dot(color.rgb, g);\\ngl_FragColor = vec4(vec3(gray), 1.0);\\n}\"","import { GrayScaleMedia } from \"./grayscale.js\"\nimport { ImageTracker } from \"./image-tracker.js\"\n\nexport { GrayScaleMedia, ImageTracker }\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;"],"sourceRoot":""}